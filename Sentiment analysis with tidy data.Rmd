---
title: "Sentiment analysis with tidy data"
author: "Macarena Quiroga"
date: "12/26/2021"
output: html_document
---

Este capítulo es sobre el análisis de opiniones o de sentimiento, y parte de este flujo de trabajo: 

![](https://www.tidytextmining.com/images/tmwr_0201.png)

Para esto, vamos a trabajar con el paquete `sentiments`. Se usan distintos tipos de diccionarios de sentimientos, los cuales asignan valoraciones positivas o negativas a las palabras, además de posibles emociones asociadas a ellas. Algunos utilizan puntajes. Las palabras consideradas *neutrales* no aparecen en estos diccionarios. No se toman en cuenta los determinantes negadores (por ejemplo, "no divertido"); el texto que se va a utilizar más adelante no tiene grandes segmentos de negaciones ni de sarcasmo. Una última cosa a tener en cuenta es que si se analiza un texto de muchos párrafos, es muy probable que la suma total dé cero, por lo cual es mejor analizar oraciones o párrafos.

La función `get_sentiments()` recupera los diccionarios posibles. 
```{r}
library(tidytext)
get_sentiments("afinn")
get_sentiments("bing")
get_sentiments("nrc") # error
```
Cuando se usan estos diccionarios de sentimientos, el sentimiento total de un texto se calcula sumando los puntajes individuales de las distintas palabras que lo contienen. 

## Análisis de sentimiento con `inner_join()`

```{r}
library(tidyverse)
nrc_joy <- get_sentiments("nrc") %>% 
  filter(sentiment == "joy")

tidy_books %>%
  filter(book == "Emma") %>%
  inner_join(nrc_joy) %>%
  count(word, sort = TRUE)
```

